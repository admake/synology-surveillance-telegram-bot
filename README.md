# Synology Surveillance Station ‚Üí Telegram Bot

[![Docker Image Size](https://img.shields.io/docker/image-size/admake/synology-surveillance-bot/latest)](https://hub.docker.com/r/admake/synology-surveillance-bot)
[![Docker Pulls](https://img.shields.io/docker/pulls/admake/synology-surveillance-bot)](https://hub.docker.com/r/admake/synology-surveillance-bot)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–∏–¥–µ–æ —Å —Å–æ–±—ã—Ç–∏—è–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è –∏–∑ Synology Surveillance Station –≤ Telegram —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ API. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ —Ä–µ—Å—É—Ä—Å–æ-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö (Raspberry Pi, –º–∞–ª–æ–º–æ—â–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã).

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** –∫ API Synology (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ NAS)
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ** —á–µ—Ä–µ–∑ ffmpeg –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
- **–ü—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HTTP-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑** (~60MB –Ω–∞ –æ—Å–Ω–æ–≤–µ Alpine Linux)

### üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

- **Graceful shutdown** —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ü–∏–π
- **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
- **Health checks** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ Docker/K8s
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** –∫ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å–±–æ—è–º —Å–µ—Ç–∏

### üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **–Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–º–µ—Ä** –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ** –¥–ª–∏–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ ffprobe
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** –±–æ–ª—å—à–∏—Ö –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** –ø—Ä–æ–≤–µ—Ä–∫–∏

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```yaml
version: "3.8"

services:
  surveillance-bot:
    image: ghcr.io/admake/synology-surveillance-telegram-bot:latest
    container_name: surveillance-bot
    restart: unless-stopped
    environment:
      # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
      - SYNO_IP=192.168.1.100
      - SYNO_USER=api_user
      - SYNO_PASS=strong_password
      - TG_TOKEN=1234567890:ABCDEFGHIJKLMNOPQRSTUVWXYZ
      - TG_CHAT_ID=-1001234567890

      # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
      - CAMERA_ID=5 # ID –∫–∞–º–µ—Ä—ã –≤ Surveillance Station
      - CHECK_INTERVAL=10 # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)
      - FRAGMENT_DURATION_MS=10000 # –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ (–º—Å)
      - LOG_LEVEL=INFO # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
      - STATE_FILE=/data/state.json # –§–∞–π–ª —Å–æ—Å—Ç–æ—è–Ω–∏—è
    volumes:
      - ./data:/data # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      - /etc/localtime:/etc/localtime:ro # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏
    healthcheck:
      test:
        [
          "CMD",
          "python3",
          "-c",
          "import sys, os; sys.exit(0 if os.path.exists('/tmp/healthcheck') else 1)",
        ]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Docker Run

```bash
docker run -d \
  --name surveillance-bot \
  --restart unless-stopped \
  -e SYNO_IP=192.168.1.100 \
  -e SYNO_USER=api_user \
  -e SYNO_PASS=strong_password \
  -e TG_TOKEN=your_telegram_bot_token \
  -e TG_CHAT_ID=your_chat_id \
  -e CAMERA_ID=5 \
  -e CHECK_INTERVAL=10 \
  -v $(pwd)/data:/data \
  -v /etc/localtime:/etc/localtime:ro \
  ghcr.io/admake/synology-surveillance-telegram-bot:latest
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Synology Surveillance Station

1. **–í–∫–ª—é—á–∏—Ç–µ API**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Surveillance Station
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `–ù–∞—Å—Ç—Ä–æ–π–∫–∏` ‚Üí `–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ`
   - –í–∫–ª—é—á–∏—Ç–µ "–í–∫–ª—é—á–∏—Ç—å –≤–µ–±-—Å–ª—É–∂–±—É API"
   - –û—Ç–º–µ—Ç—å—Ç–µ "–†–∞–∑—Ä–µ—à–∏—Ç—å –∞–¥—Ä–µ—Å–∞" –∏ –¥–æ–±–∞–≤—å—Ç–µ IP –≤–∞—à–µ–≥–æ Docker-—Ö–æ—Å—Ç–∞

2. **–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è API**:
   - `–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è` ‚Üí `–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å` ‚Üí `–°–æ–∑–¥–∞—Ç—å`
   - –î–∞–π—Ç–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `telegram-bot`)
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å
   - –í Surveillance Station –¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞:
     - `–ü—Ä–æ—Å–º–æ—Ç—Ä` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
     - `–≠–∫—Å–ø–æ—Ä—Ç` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ)

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∑–∞–ø–∏—Å—å –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é**:
   - –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–µ—Ä—ã –≤ `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø–∏—Å–∏`
   - –í—ã–±–µ—Ä–∏—Ç–µ "–ü–æ —Å–æ–±—ã—Ç–∏—é" –≤–º–µ—Å—Ç–æ "–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ"
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä –¥–≤–∏–∂–µ–Ω–∏—è
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 30-60 —Å–µ–∫—É–Ω–¥

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –±–æ—Ç–∞

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞** —á–µ—Ä–µ–∑ [@BotFather](https://t.me/botfather):

   ```
   /newbot
   –ù–∞–∑–≤–∞–Ω–∏–µ: Surveillance Bot
   username: your_surveillance_bot
   ```

2. **–ü–æ–ª—É—á–∏—Ç–µ Chat ID**:

   ```bash
   # –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É, –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   curl "https://api.telegram.org/bot<YOUR_TOKEN>/getUpdates"

   # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É:
   docker exec surveillance-bot python3 -c "
   import os, requests
   token = os.getenv('TG_TOKEN')
   response = requests.get(f'https://api.telegram.org/bot{token}/getUpdates').json()
   print('Chat ID:', response['result'][0]['message']['chat']['id'])
   "
   ```

3. **–î–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–æ–≤**:
   - –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
   - –°–¥–µ–ª–∞–π—Ç–µ –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
   - –ü–æ–ª—É—á–∏—Ç–µ Chat ID (–æ–Ω –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º)

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è             | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ                                       |
| ---------------------- | ----------- | --------------------- | ---------------------------------------------- |
| `SYNO_IP`              | –î–∞          | -                     | IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ Synology NAS                   |
| `SYNO_USER`            | –î–∞          | -                     | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è API                           |
| `SYNO_PASS`            | –î–∞          | -                     | –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è API                        |
| `SYNO_OTP`             | –ù–µ—Ç         | -                     | OTP-–∫–æ–¥ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞ 2FA)                    |
| `TG_TOKEN`             | –î–∞          | -                     | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞                            |
| `TG_CHAT_ID`           | –î–∞          | -                     | ID —á–∞—Ç–∞/–∫–∞–Ω–∞–ª–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏                    |
| `CAMERA_ID`            | –ù–µ—Ç         | `1`                   | ID –∫–∞–º–µ—Ä—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞                      |
| `CHECK_INTERVAL`       | –ù–µ—Ç         | `10`                  | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–∏—Å–µ–π (—Å–µ–∫)                |
| `FRAGMENT_DURATION_MS` | –ù–µ—Ç         | `10000`               | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ (–º—Å)                    |
| `LOG_LEVEL`            | –ù–µ—Ç         | `INFO`                | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG/INFO/WARNING/ERROR) |
| `STATE_FILE`           | –ù–µ—Ç         | `/data/state.json`    | –§–∞–π–ª –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è                  |
| `MAX_FRAGMENT_SIZE_MB` | –ù–µ—Ç         | `50`                  | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ (–ú–ë)             |

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker logs -f surveillance-bot

# –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
docker logs surveillance-bot 2>&1 | grep -E "ERROR|WARNING"

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker logs --tail 100 surveillance-bot
```

### –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
docker ps -f name=surveillance-bot

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats surveillance-bot

# Health check —Å—Ç–∞—Ç—É—Å
docker inspect --format='{{.State.Health.Status}}' surveillance-bot
```

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

```bash
# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it surveillance-bot sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å Synology
curl -k "https://${SYNO_IP}:5001/webapi/entry.cgi?api=SYNO.API.Info&version=1&method=Query&query=all"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—Ç–∞
cat /data/state.json | python3 -m json.tool

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
rm -rf /tmp/synology_cache/*
```

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ

1. **–î–ª—è Raspberry Pi 4/3B+**:

   ```
   CHECK_INTERVAL=15
   FRAGMENT_DURATION_MS=15000
   MAX_WORKERS=2
   ```

2. **–î–ª—è –º–æ—â–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤**:

   ```
   CHECK_INTERVAL=5
   FRAGMENT_DURATION_MS=5000
   MAX_WORKERS=5
   ```

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ IP –¥–ª—è NAS –∏ Docker-—Ö–æ—Å—Ç–∞
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ QoS –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä–µ –¥–ª—è –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ VLAN –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cat > monitor.sh << 'EOF'
#!/bin/bash
while true; do
    clear
    echo "=== Surveillance Bot Monitor ==="
    echo "Time: $(date)"
    echo ""

    # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    echo "Container Status:"
    docker ps -f name=surveillance-bot --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"
    echo ""

    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/–ø–∞–º—è—Ç–∏
    echo "Resource Usage:"
    docker stats surveillance-bot --no-stream --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}"
    echo ""

    # –õ–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å—Ç—Ä–æ–∫)
    echo "Recent Logs:"
    docker logs --tail 5 surveillance-bot 2>/dev/null | tail -5
    echo ""

    sleep 5
done
EOF

chmod +x monitor.sh
./monitor.sh
```

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–º–µ—Ä

```yaml
# docker-compose.multi-camera.yml
version: "3.8"

services:
  camera1-bot:
    image: ghcr.io/admake/synology-surveillance-telegram-bot:latest
    container_name: camera1-bot
    environment:
      - SYNO_IP=192.168.1.100
      - SYNO_USER=api_user
      - SYNO_PASS=password
      - TG_TOKEN=your_token
      - TG_CHAT_ID=-1001234567890
      - CAMERA_ID=1
      - CHECK_INTERVAL=10
    volumes:
      - ./camera1-data:/data

  camera2-bot:
    image: ghcr.io/admake/synology-surveillance-telegram-bot:latest
    container_name: camera2-bot
    environment:
      - SYNO_IP=192.168.1.100
      - SYNO_USER=api_user
      - SYNO_PASS=password
      - TG_TOKEN=your_token
      - TG_CHAT_ID=-1001234567890
      - CAMERA_ID=2
      - CHECK_INTERVAL=10
    volumes:
      - ./camera2-data:/data
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Prometheus/Grafana

```yaml
# prometheus.yml
scrape_configs:
  - job_name: "surveillance-bot"
    static_configs:
      - targets: ["docker-host:9091"]
    metrics_path: /metrics

# Docker Compose —Å —ç–∫—Å–ø–æ—Ä—Ç–µ—Ä–æ–º –º–µ—Ç—Ä–∏–∫
surveillance-bot:
  # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ...
  ports:
    - "9091:9091" # –ú–µ—Ç—Ä–∏–∫–∏ Prometheus
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **"–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å"**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –≤–∫–ª—é—á–µ–Ω –≤ Surveillance Station
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ IP Docker-—Ö–æ—Å—Ç–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω

2. **"–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç"**:
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –ø—Ä–∞–≤–∞ "–≠–∫—Å–ø–æ—Ä—Ç"
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤—É—é —Å–≤—è–∑–Ω–æ—Å—Ç—å —Å NAS
   - –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã: `FRAGMENT_DURATION_MS=15000`

3. **"–§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –¥–ª—è Telegram"**:
   - –£–º–µ–Ω—å—à–∏—Ç–µ `FRAGMENT_DURATION_MS`
   - –í–∫–ª—é—á–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –≤–∏–¥–µ–æ
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `MAX_FRAGMENT_SIZE_MB=45`

4. **–í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU**:
   - –£–≤–µ–ª–∏—á—å—Ç–µ `CHECK_INTERVAL`
   - –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤
   - –û—Ç–∫–ª—é—á–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –≤–∏–¥–µ–æ –µ—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### –õ–æ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ JSON –ª–æ–≥–∏:

```bash
# –ü–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ —Å jq
docker logs surveillance-bot 2>&1 | jq -R 'fromjson? | select(. != null)'

# –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—é
docker logs surveillance-bot 2>&1 | jq -R 'fromjson? | select(.level == "ERROR")'

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
docker logs surveillance-bot 2>&1 | \
  jq -R 'fromjson? | select(.level == "ERROR") | .message' | \
  sort | uniq -c | sort -rn
```

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏: `git checkout -b feature/amazing-feature`
3. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m 'Add amazing feature'`
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ —Ñ–æ—Ä–∫: `git push origin feature/amazing-feature`
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. –≤ —Ñ–∞–π–ª–µ [LICENSE](LICENSE).

## ‚≠ê –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ï—Å–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ–º–æ–≥ –≤–∞–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É –Ω–∞ GitHub –∏ –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –∫–æ–ª–ª–µ–≥–∞–º–∏!

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –±–æ—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–æ–¥—É–∫—Ç–æ–º Synology Inc. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —Å–æ–±–ª—é–¥–∞–µ—Ç–µ –≤—Å–µ –∑–∞–∫–æ–Ω—ã –æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ –≤–∞—à–µ–º —Ä–µ–≥–∏–æ–Ω–µ.
